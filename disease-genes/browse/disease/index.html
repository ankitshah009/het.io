<!DOCTYPE html>
<html lang="en">

<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>hetio &middot; Disease-Associated Genes</title>
  <link href="../../../favicon.ico" rel="icon" type="image/x-icon" />

  <!-- Bootstrap core CSS -->
  <link href="../../../css/bootstrap.min.css" rel="stylesheet">
  <!-- Custom styles for this template -->
  <link href="../../../css/bootstrap-theme.css" rel="stylesheet">

  <style type="text/css" title="currentStyle">
    @import "../css/demo_page.css";
    @import "../css/demo_table_jui.css";
    @import "../css/jquery-ui-1.8.4.custom.css";
    body {
      padding-top: 50px;
    }
  </style>

</head>

<body>

  <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">het.io</a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav">
          <li>
            <a href="../../../">Home</a>
          </li>
          <li>
            <a href="../../../hnlp">HNLP</a>
          </li>
          
          <li class="active" class="dropdown">
            <a href="../../" class="dropdown-toggle" data-toggle="dropdown">
              Disease Genes
              <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
              <li>
                <a href="../../">About</a>
              </li>
              <li class="active">
                <a href="../">Browse</a>
              </li>
              <li>
                <a href="../../downloads">Downloads</a>
              </li>
            </ul>
          </li>

          <li>
            <a href="../../../media">Media</a>
          </li>
          <li class="dropdown">
            <a href="http://baranzinilab.ucsf.edu/" target="_blank" class="dropdown-toggle" data-toggle="dropdown">
              Baranzini Lab
              <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
              <li>
                <a href="http://baranzinilab.ucsf.edu/" target="_blank">Home</a>
              </li>
              <li class="divider"></li>
              <li>
                <a href="http://baranzinilab.ucsf.edu/research" target="_blank">Research</a>
              </li>
              <li>
                <a href="http://baranzinilab.ucsf.edu/publications" target="_blank">Publications</a>
              </li>
              <li>
                <a href="http://baranzinilab.ucsf.edu/tools" target="_blank">Tools</a>
              </li>
              <li>
                <a href="http://baranzinilab.ucsf.edu/links" target="_blank">Links</a>
              </li>
              <li>
                <a href="http://baranzinilab.ucsf.edu/contact-sergio-e-baranzini-phd" target="_blank">Contact</a>
              </li>
            </ul>
          </li>
        </ul>
      </div>
      <!--/.navbar-collapse -->
    </div>
  </div>


  <div class="container">

    <div id="heading">Disease Heading</div>
    <div id="disease_info">Disease Info</div>
    <div id="table_description">Table usage description</div>
    <div id="dynamic_disease">Generating Table...</div>


    <h2>Prediction Components</h2>
    <div id="barchart_description"></div>
    <div id="barchart" style="width: 900px; height: 900px;">Activate barchart by clicking a row...</div>

  </div>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery-2.1.0.min.js"></script>
  <script type="text/javascript" charset="utf-8" src="../../../js/bootstrap.min.js"></script>
  <script type="text/javascript" charset="utf-8" src="../js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" charset="utf-8" src="../js/jquery.csv-0.71.min.js"></script>
  <script type="text/javascript" charset="utf-8" src="../js/tablefxns.js"></script>
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>


  <script type='text/javascript'>
    var url_vars = getUrlVars();
    var doid_code = url_vars['disease'];
    if (!doid_code) {
      window.location = '../';
    }

    google.load('visualization', '1', {
      packages: ['corechart']
    });

    var info_path = '../data/disease-info/{0}.json'.f(doid_code);
    jQuery.getJSON(info_path, success = function(json) {
      console.log(json);
      var disease_name = json['name'];
      // prepare heading
      jQuery('#heading').html('<h2>Predictions for <i>{0}</i>'.f(disease_name));
      // prepare disease information list
      var html_list = [];
      html_list.push('<dl class="dl-horizontal">');
      var doid_link = 'http://www.disease-ontology.org/term/DOID%3A{0}/'.f(doid_code.slice(5));
      html_list.push('<dt>Disease Ontology</dt><dd><a href="{0}" target="_blank">{1}</a></dd>'.format(doid_link, json['disease_code']));
      var efo_term = 'EFO:' + json['xref']['EFO'][0];
      var efo_link = 'http://www.ebi.ac.uk/ontology-lookup/browse.do?ontName=EFO&termId={0}'.f(efo_term);
      html_list.push('<dt>EFO</dt><dd><a href="{0}" target="_blank">{1}</a></dd>'.format(efo_link, efo_term));
      umls_terms = json['xref']['UMLS_CUI'].join(', ');
      if (umls_terms) {
        html_list.push('<dt>UMLS Concepts</dt><dd>{0}</dd>'.format(umls_terms));
      }
      html_list.push('</dl>');
      jQuery('#disease_info').html(html_list.join(''));
      // prepare table usage paragraph
      var table_description = "<p>The table shows the predicted probability that <i>{0}</i> is associated with each protein-coding gene. Clicking the gene symbol loads all predictions for that gene. Clicking on the gene code opens an external link with additional gene information. Clicking elsewhere on the row displays a barchart below showing each feature's contribution to the overall prediction. Status indicates whether a GWAS-reported association exists that is linked to (&plusmn; HCL) or is (+ HCA) a high confidence association or is linked to (&plusmn; LCL) or is (&plusmn; LCA) a low confidence association. Other associations shows the number of diseases, excluding <i>{0}</i>, that the gene is associated with. The average prediction across all diseases for a gene is showed by mean prediction.</p>".f(disease_name);
      jQuery('#table_description').html(table_description);
    }).error(function() {
      window.location = './';
    });

    var table_path = '../data/disease-tables/{0}.txt'.f(doid_code)
     table_identity = {
      doid_code: doid_code
    };
    dynamicTableFromURL('disease', table_path, aoColumnDefs, table_identity);
  </script>


</body>

</html>
